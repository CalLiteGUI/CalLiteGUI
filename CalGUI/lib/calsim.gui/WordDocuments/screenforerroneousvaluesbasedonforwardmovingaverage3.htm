<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN"> 
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=Windows-1252">
    <link rel="stylesheet" type="text/css" href="../Theme/nav.css">
    <link rel="stylesheet" type="text/css" href="../LinksExt/C1H_HTML.css">
    <link rel="stylesheet" type="text/css" href="../LinksExt/Ch8-Scripting.css">
    <meta name="Generator" content="ComponentOne Doc-To-Help v.2009.2.0.480">
    <meta name="D2HTheme" content="(Default) v.21">
    <title>Screen for Erroneous Values Based on Forward Moving Average</title>
  </head>
  <body relpart="../" background-color="transparent" style=
  " margin-left: 0px; padding-bottom: 0px; margin-top: 0px; padding-right: 0px; margin-bottom: 0px; margin-right: 0px; padding-left: 0px; padding-top: 0px;">
    <div id="nsbanner" style=
    " padding-bottom: 0px; padding-right: 0px; left: 0px; padding-left: 0px; padding-top: 0px;">
      <div id="TitleRow" style=
      " padding-bottom: 4px; padding-right: 10px; padding-left: 22px; padding-top: 4px; width: 100%;">
        <div id="ienav">
          <p align="left" class="linknav">
             <a id="D2HPrevious" class="d2hpreviousenabled" href=
            "screenforerroneousvaluesbasedonforwardmovingaverage2.htm">Previous</a> &nbsp; <a id=
            "D2HNext" class="d2hnextenabled" href=
            "screenforerroneousvaluesbasedonmaximumminimumrange4.htm">Next</a>
          </p>
        </div>
      </div>
    </div>
    <div id="nstext" valign="bottom" class="d2h_main_nstext" style=
    " padding-bottom: 10px; padding-right: 10px; padding-left: 22px; padding-top: 5px;">
      <div id="d2h_breadcrumbs" class="d2h_breadcrumbs">
        <a class="d2h_breadcrumbsnormal" href="scripting1.htm">Scripting</a> <font class=
        "d2h_breadcrumbslinkseparator">&gt;</font> <a class="d2h_breadcrumbsnormal" href=
        "mathfunctions2.htm">Math Functions</a>
      </div>
      <div class="section1" style=" margin-top: 0pt; margin-bottom: 0pt;">
        <p style=
        " margin-left: 0pt; margin-top: 9pt; margin-bottom: 6pt; margin-right: 0pt; tab-stops: 63.0pt;">
          <br>
           <font size="5" face="SansSerif, Verdana, Arial, Helvetica"><b>Screen for Erroneous
          Values Based on Forward Moving Average</b></font><br>
          <br>
           <code>screenWithForwardMovingAverage<font style=" font-weight: normal;">(integer
          numberToAverageOver,</font></code>
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           <code><font style=" font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; floating-point
          changeLimit,</font></code>
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           <code><font style=" font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; boolean
          setInvalidToMissingValue,</font></code>
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           <code><font style=" font-weight: normal;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string
          qualityFlagForInvalidValue)</font></code>
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           &nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           Screen the current time series data set for possible erroneous values based on the
          deviation from the forward moving average over <b>numberToAverageOver</b> values computed
          at the previous point.&nbsp; If the deviation from the moving average is greater than
          <b>changeLimit</b>, the value fails the screening test.&nbsp; Data values failing the
          screening test are assigned a quality flag and/or are set to missing.&nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           &nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           Missing values and values failing the screening test are not counted in the moving
          average and the divisor of the average is less one for each such value.&nbsp; At least 2
          values must be defined in the moving average else the moving average is undefined and
          value being examined is screened acceptable.&nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           If <b>setInvalidToMissingValue</b> is true, values failing the screening test are set to
          missing.
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           &nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           If <b>qualityFlagForInvalidValue</b> is set to a character or string recognized as a
          valid quality flag, the quality flag will be set for tested values.&nbsp; If there is no
          previously existing quality available for the time series, the quality flag array will be
          created for the time series. Values failing the quality test are set to the user
          specified quality flag for invalid values.&nbsp; If there is existing quality data and
          the time series value passes the quality test, the existing quality flag for the points
          is unchanged.&nbsp; If there was no previously existing quality and the time series value
          passes the quality test, the quality flag for the point is set to "Okay.”
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           &nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           The acceptable values for <b>qualityFlagForInvalidValue</b> strings are: "M" or
          "Missing”, "R" or "Rejected”, "Q" or "Questionable.” A blank string (" ") is entered to
          disable the setting of the quality flag.
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           &nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           For the example:
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           &nbsp;
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 28.0px; margin-top: 0pt; margin-bottom: 0pt; margin-right: 0pt;">
           resultantDataSet = dataSet.screenWithForwardMovingAverage (&nbsp;
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 28.0px; text-indent: 36pt; margin-top: 0pt; margin-bottom: 0pt; margin-right: 0pt;">
           16, 100., Constants.TRUE,&nbsp; “R” )
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 28.0px; text-indent: 36pt; margin-top: 0pt; margin-bottom: 0pt; margin-right: 0pt;">
           &nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           the forward moving average will be computed over 16 values, values deviating from the
          moving average by more than 100.0 will be set to missing and flagged as rejected.
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           &nbsp;
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           <b>Parameters:</b>
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 28.0px; margin-top: 0pt; margin-bottom: 0pt; margin-right: 0pt;">
           <code>numberToAverageOver</code> – An integer specifying the number of averaging
          values.&nbsp; Must be at least 2.
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 28.0px; margin-top: 0pt; margin-bottom: 0pt; margin-right: 0pt;">
           <code>changeLimit</code> – A floating-point number specifying the maximum change allowed
          in the tested value from the forward moving average value.
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 28.0px; margin-top: 0pt; margin-bottom: 0pt; margin-right: 0pt;">
           <code>setInvalidToMissingValue</code> – Either Constants.TRUE, or Constants.FALSE,
          specifying whether time series values failing the screening test are set to the "Missing"
          value.
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 28.0px; margin-top: 0pt; margin-bottom: 0pt; margin-right: 0pt;">
           <code>qualityFlagForInvalidValue</code> - A string representing the quality flag setting
          for values failing the screening test.&nbsp; The accepted character strings are: "M" or
          "Missing”, "R" or "Rejected”, "Q" or "Questionable.”&nbsp; An empty string (“ ”) is
          entered to disable the setting of the quality flag.
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           <b>Example:</b>
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 0.0px; margin-top: 0pt; text-indent: 36pt;">
           <code>screenedData = tsData.screenWithForwardMovingAverage(</code>
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 0.0px; margin-top: 0pt; text-indent: 36pt;">
           <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16,</code>
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 0.0px; margin-top: 0pt; text-indent: 36pt;">
           <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 100.,</code>
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 0.0px; margin-top: 0pt; text-indent: 36pt;">
           <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Constants.TRUE,</code>
        </p>
        <p class="bodytextindent155" style=
        " margin-left: 0.0px; margin-top: 0pt; text-indent: 36pt;">
           <code>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; “R”)</code>
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           <b>Returns:</b> A new TimeSeriesMath object.
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           <b>Generated Exceptions:</b> Throws a HecMathException if numberToAverageOver is less
          than 2; if an unrecognized quality flag is entered for <code><font style=
          " font-weight: normal;">qualityFlagForInvalidValue</font></code> or if <code><font style=
          " font-weight: normal;">setInvalidToMissingValue</font></code> is false and <code><font
          style=" font-weight: normal;">qualityFlagForInvalidValue</font></code> is blank (no
          action would occur).
        </p>
        <p class="bodytextindent155" style=" margin-left: 0.0px; margin-top: 0pt;">
           &nbsp;
        </p>
      </div>
    </div>
  </body>
</html>
